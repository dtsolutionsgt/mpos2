DROP TABLE D_DEPOSD
DROP TABLE D_DEPOSB
DROP TABLE D_DEPOS


/****** Object:  Table [dbo].[D_DEPOS]    Script Date: 1/06/2020 12:44:31 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[D_DEPOS](
	[COREL] [nvarchar](20) NOT NULL,
	[EMPRESA] [int] NULL,
	[FECHA] [datetime] NULL,
	[RUTA] [int] NULL,
	[BANCO] [int] NULL,
	[CUENTA] [nvarchar](25) NULL,
	[REFERENCIA] [nvarchar](25) NULL,
	[TOTAL] [float] NULL,
	[TOTEFEC] [float] NULL,
	[TOTCHEQ] [float] NULL,
	[NUMCHEQ] [int] NULL,
	[IMPRES] [int] NULL,
	[STATCOM] [nvarchar](1) NULL,
	[ANULADO] [bit] NOT NULL,
	[CODIGOLIQUIDACION] [int] NOT NULL,
 CONSTRAINT [PK_D_DEPOS] PRIMARY KEY CLUSTERED 
(
	[COREL] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[D_DEPOS] ADD  DEFAULT ((0)) FOR [ANULADO]
GO

ALTER TABLE [dbo].[D_DEPOS] ADD  DEFAULT ((0)) FOR [CODIGOLIQUIDACION]
GO

ALTER TABLE [dbo].[D_DEPOS]  WITH NOCHECK ADD  CONSTRAINT [FK_D_DEPOS_P_RUTA] FOREIGN KEY([RUTA])
REFERENCES [dbo].[P_RUTA] ([CODIGO_RUTA])
GO

ALTER TABLE [dbo].[D_DEPOS] CHECK CONSTRAINT [FK_D_DEPOS_P_RUTA]
GO

ALTER TABLE [dbo].[D_DEPOS]  WITH NOCHECK ADD  CONSTRAINT [FK_D_DEPOS_P_BANCO] FOREIGN KEY([BANCO])
REFERENCES [dbo].[P_BANCO] ([CODIGO_BANCO])
GO

ALTER TABLE [dbo].[D_DEPOS] CHECK CONSTRAINT [FK_D_DEPOS_P_BANCO]
GO

ALTER TABLE [dbo].[D_DEPOS]  WITH NOCHECK ADD  CONSTRAINT [FK_D_DEPOS_P_EMPRESA] FOREIGN KEY([EMPRESA])
REFERENCES [dbo].[P_EMPRESA] ([EMPRESA])
GO

ALTER TABLE [dbo].[D_DEPOS] CHECK CONSTRAINT [FK_D_DEPOS_P_BANCO]
GO

/****** Object:  Table [dbo].[D_DEPOSB]    Script Date: 1/06/2020 12:44:45 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[D_DEPOSB](
    [COREL_DET] [int] NOT NULL,
	[COREL] [nvarchar](20) NOT NULL,
	[DENOMINACION] [float] NOT NULL,
	[CANTIDAD] [int] NULL,
	[TIPO] [nvarchar](1) NOT NULL,
	[MONEDA] [nvarchar](1) NOT NULL,
 CONSTRAINT [PK_D_DEPOSB] PRIMARY KEY CLUSTERED 
(
	[COREL_DET] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[D_DEPOSB]  WITH NOCHECK ADD  CONSTRAINT [FK_D_DEPOSB_D_DEPOS] FOREIGN KEY([COREL])
REFERENCES [dbo].[D_DEPOS] ([COREL])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[D_DEPOSB] CHECK CONSTRAINT [FK_D_DEPOSB_D_DEPOS]
GO


CREATE NONCLUSTERED INDEX [IX_D_DEPOSB] ON [dbo].[D_DEPOSB]
(
	[COREL] ASC,
	[DENOMINACION] ASC,
	[TIPO] ASC,
	[MONEDA] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO


/****** Object:  Table [dbo].[D_DEPOSD]    Script Date: 1/06/2020 12:44:58 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[D_DEPOSD](
	[COREL_DET] [int] NOT NULL,
	[COREL] [nvarchar](20) NOT NULL,
	[DOCCOREL] [nvarchar](20) NOT NULL,
	[TIPODOC] [nvarchar](1) NULL,
	[CODPAGO] [int] NULL,
	[CHEQUE] [nvarchar](1) NULL,
	[MONTO] [float] NULL,
	[BANCO] [nvarchar](25) NULL,
	[NUMERO] [nvarchar](25) NULL,
 CONSTRAINT [PK_D_DEPOSD] PRIMARY KEY CLUSTERED 
(
	[COREL_DET] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[D_DEPOSD]  WITH NOCHECK ADD  CONSTRAINT [FK_D_DEPOSD_D_DEPOS] FOREIGN KEY([COREL])
REFERENCES [dbo].[D_DEPOS] ([COREL])
ON DELETE CASCADE
GO

ALTER TABLE [dbo].[D_DEPOSD] CHECK CONSTRAINT [FK_D_DEPOSD_D_DEPOS]
GO

CREATE NONCLUSTERED INDEX [IX_D_DEPOSD] ON [dbo].[D_DEPOSD]
(
	[COREL] ASC,
	[DOCCOREL] ASC,
	[CODPAGO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO

